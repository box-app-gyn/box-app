# .cursorrules - Configura√ß√£o para React/Next.js + Firebase
# Cole este arquivo inteiro na raiz do seu projeto

## IDENTIFICA√á√ÉO DO PROJETO
# Stack: React/Next.js + TypeScript + Firebase + Tailwind
# Database: Firestore
# Deployment: Vercel/Netlify

## COMO O SISTEMA FUNCIONA

O.Cursor l√™ este arquivo e automaticamente:
1.Identifica o n√≠vel de risco pela localiza√ß√£o do arquivo
2.Aplica as regras correspondentes
3.Pede aprova√ß√£o quando necess√°rio

## N√çVEL 1 - ALTERA√á√ïES AUTOM√ÅTICAS (Sem aprova√ß√£o)

# Pode alterar livremente:

- src/components/**/*.{tsx,ts,jsx,js} (apenas UI e styling)
- src/styles/**/*.{css,scss,module.css}
- src/types/**/*.{ts,d.ts}
- src/utils/**/*.{ts,js} (fun√ß√µes puras)
- src/constants/**/*.{ts,js}
- *.md (documenta√ß√£o)
- Coment√°rios em qualquer arquivo
- Formata√ß√£o e linting
- Tailwind classes
- Imports e exports b√°sicos

## N√çVEL 2 - REVIS√ÉO OBRIGAT√ìRIA (Mostrar antes/depois)

Deve explicar E mostrar c√≥digo:

- src/pages/**/*.{tsx,ts} (p√°ginas Next.js)
- src/app/**/*.{tsx,ts} (App Router Next.js 13+)
- src/hooks/**/*.{ts,js} (custom hooks)
- src/context/**/*.{tsx,ts} (React Context)
- src/lib/**/*.{ts,js} (bibliotecas auxiliares)
- next.config.js (configura√ß√µes n√£o-cr√≠ticas)
- tailwind.config.js (configura√ß√µes de design)
- tsconfig.json (configura√ß√µes TypeScript)
- L√≥gica de estado complexa
- Integra√ß√µes com APIs externas

## N√çVEL 3 - APROVA√á√ÉO MANUAL OBRIGAT√ìRIA (Cr√≠tico)
# NUNCA altere sem aprova√ß√£o expl√≠cita:
- src/lib/firebase.{ts,js} (configura√ß√£o Firebase)
- firestore.rules (regras de seguran√ßa)
- firebase.json (configura√ß√£o do projeto)
- src/pages/api/**/*.{ts,js} (API routes)
- src/app/api/**/*.{ts,js} (API routes App Router)
- package.json (depend√™ncias)
- .env* (vari√°veis de ambiente)
- middleware.{ts,js} (middleware Next.js)
- Estruturas de cole√ß√µes Firestore
- Configura√ß√µes de autentica√ß√£o
- Regras de seguran√ßa
- Configura√ß√µes de deploy

## REGRAS ESPEC√çFICAS PARA FIRESTORE

### COLE√á√ïES (Sempre N√≠vel 3)
- users ‚Üí Aprova√ß√£o manual obrigat√≥ria
- products ‚Üí Aprova√ß√£o manual obrigat√≥ria  
- orders ‚Üí Aprova√ß√£o manual obrigat√≥ria
- Qualquer nova cole√ß√£o ‚Üí Aprova√ß√£o manual

### ANTES de alterar Firestore:
1. **MOSTRAR** estrutura atual da cole√ß√£o
2. **MOSTRAR** estrutura proposta
3. **EXPLICAR** impacto em dados existentes
4. **SUGERIR** estrat√©gia de migra√ß√£o
5. **ALERTAR** sobre poss√≠vel perda de dados
6. **AGUARDAR** confirma√ß√£o expl√≠cita

## PROCESSO OBRIGAT√ìRIO

### PARA N√çVEL 2 (Revis√£o):
```
üîç REVIS√ÉO NECESS√ÅRIA

ARQUIVO: [nome do arquivo]
ALTERA√á√ÉO: [breve descri√ß√£o]

ANTES:
[c√≥digo atual]

DEPOIS:
[c√≥digo proposto]

IMPACTO: [explica√ß√£o]
PODE PROSSEGUIR? (s/n)
```

### PARA N√çVEL 3 (Cr√≠tico):
```
üö® APROVA√á√ÉO CR√çTICA NECESS√ÅRIA

TIPO: [Firebase/API/Config/etc]
ARQUIVOS: [lista completa]
RESUMO: [o que vai fazer]

C√ìDIGO ANTES:
[c√≥digo atual completo]

C√ìDIGO DEPOIS:
[c√≥digo proposto completo]

IMPACTO:
- [impacto 1]
- [impacto 2]

RISCOS:
- [risco 1]
- [risco 2]

COMO REVERTER:
- [passo 1]
- [passo 2]

PRECISO DE APROVA√á√ÉO EXPL√çCITA!
Digite "APROVADO" para continuar:
```

## PROTE√á√ïES ESPEC√çFICAS DO REACT/NEXT.JS

### COMPONENTES
- Sempre mantenha props tipadas
- Preserve estrutura de pastas
- Mantenha padr√µes de nomenclatura
- N√£o quebre componentes existentes

### P√ÅGINAS E ROTAS
- N√£o altere URLs existentes sem avisar
- Preserve par√¢metros de rota
- Mantenha SEO metadata
- N√£o quebre navega√ß√£o

### HOOKS
- Mantenha assinatura de hooks existentes
- Preserve dependencies arrays
- N√£o altere comportamento de hooks em uso

### ESTADO
- N√£o altere estruturas de state em uso
- Preserve Context providers
- Mantenha compatibilidade com componentes

## SINAIS DE ALERTA CR√çTICOS
Se detectar qualquer um desses, PARE imediatamente:
- Deletar cole√ß√µes Firestore
- Alterar firestore.rules
- Modificar autentica√ß√£o
- Mudar API endpoints em produ√ß√£o
- Alterar vari√°veis de ambiente
- Modificar configura√ß√µes de build
- Quebrar rotas existentes

## COMANDOS ESPECIAIS

### Para solicitar altera√ß√£o cr√≠tica:
"Quero alterar [X]. Mostre-me o processo completo antes de fazer qualquer mudan√ßa."

### Para for√ßar aprova√ß√£o:
"APROVADO - pode prosseguir com a altera√ß√£o proposta"

### Para criar backup:
"Crie backup antes de alterar [X]"

## INTEGRA√á√ÉO COM FIREBASE

### Regras de Seguran√ßa:
- Sempre validar autentica√ß√£o
- Nunca permitir write p√∫blico
- Sempre validar dados de entrada
- Preservar estruturas existentes

### Cole√ß√µes Firestore:
```javascript
// Estrutura padr√£o que deve ser preservada
users: {
  id: string,
  email: string,
  createdAt: timestamp,
  // ... outros campos
}

products: {
  id: string,
  name: string,
  price: number,
  // ... outros campos
}
```

## BACKUP AUTOM√ÅTICO
Criar backup antes de alterar:
- firestore.rules
- firebase.json
- src/lib/firebase.ts
- package.json
- .env files

## TESTES OBRIGAT√ìRIOS
Sempre sugerir testes para:
- Altera√ß√µes em hooks
- Mudan√ßas em Context
- Modifica√ß√µes em utils
- Integra√ß√µes Firebase

## EXEMPLO DE USO CORRETO

‚ùå **ERRADO:**
```
Cursor altera firestore.rules diretamente sem mostrar
```

‚úÖ **CORRETO:**
```
Cursor: "üö® Detectei que voc√™ quer alterar firestore.rules. 
Isso √© uma altera√ß√£o cr√≠tica. Vou mostrar exatamente o que 
pretendo alterar e aguardar sua aprova√ß√£o expl√≠cita..."
```

## CONFIGURA√á√ÉO FINAL
Este arquivo deve estar na raiz do projeto junto com:
- package.json
- next.config.js
- tsconfig.json
- .env.local